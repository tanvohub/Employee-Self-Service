/*! ess - v - 2017-10-11 */
function historyController($scope) {
    $scope.test = "Hello angular";
}

function travelController($scope, activeApplicationApi) {
    function initApplications(response) {
        $scope.applications = response.result;
    }
    $scope.applications = [], $scope.savedApplications = [], $scope.init = function() {
        var params = {
            empId: 11168,
            status: "APPROVED"
        };
        activeApplicationApi.get(params).$promise.then(initApplications);
    }, $scope.init();
}

function historyController($scope, travelApplicationApi) {
    function parseResponse(resp) {
        result = resp.result;
        for (var i = 0; i < result.length; i++) {
            var row = result[i];
            completeTravelHistory.push({
                travelDate: row.travelDate,
                empName: row.applicant.lastName,
                destination: row.itinerary.destinations[0].address.city,
                allottedFunds: "$" + row.totalAllowance,
                status: row.status
            });
        }
    }
    var completeTravelHistory = [];
    $scope.date = {
        from: moment().subtract(1, "month").format("MM/DD/YYYY"),
        to: moment().format("MM/DD/YYYY")
    }, $scope.init = function() {
        function onSuccess(resp) {
            parseResponse(resp), $scope.updateDateRange();
        }
        function onFail(resp) {
            modals.open("500", {
                details: resp
            });
        }
        var params = {
            empId: 11168,
            status: "APPROVED"
        };
        return travelApplicationApi.get(params, onSuccess, onFail);
    }, $scope.updateDateRange = function() {
        $scope.date.from = angular.element("#dateFrom").val(), $scope.date.to = angular.element("#dateTo").val(), 
        $scope.travelHistory = [];
        for (var i = 0; i < completeTravelHistory.length; i++) Date.parse(completeTravelHistory[i].travelDate) >= Date.parse($scope.date.from) && Date.parse(completeTravelHistory[i].travelDate) <= Date.parse($scope.date.to) && $scope.travelHistory.push(completeTravelHistory[i]);
    }, $scope.init();
}

var essTravel = angular.module("essTravel");

essTravel.controller("TravelManageHistoryController", [ "$scope", historyController ]);

var essTravel = angular.module("essTravel");

essTravel.controller("TravelApplicationController", [ "$scope", "TravelActiveApplicationApi", travelController ]);

var essTravel = angular.module("essTravel");

essTravel.controller("TravelHistoryController", [ "$scope", "TravelApplicationApi", "PaginationModel", historyController ]);
//# sourceMappingURL=ess-travel.min.js.map